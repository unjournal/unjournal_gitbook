# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Overview

This is The Unjournal's GitBook documentation site. The Unjournal provides open, rigorous evaluation of quantitative research informing global priorities, especially in economics, policy, and social science.

The repository contains:
- **GitBook content**: Markdown files organized by topic (policies, benefits, FAQ, grants, etc.)
- **Newsletter automation**: Python scripts that send email digests via Mailchimp when commits include `#PushNewsletter`

## Newsletter System

The newsletter automation triggers on pushes to `main` when the commit message contains `#PushNewsletter`.

### Commands

```bash
# Install dependencies
poetry install

# Run newsletter sender locally (requires Mailchimp env vars)
poetry run python main.py
```

### Required Environment Variables
- `MAILCHIMP_API_SERVER`
- `MAILCHIMP_API_KEY`
- `MAILCHIMP_SEGMENT_LIST`
- `MAILCHIMP_SEGMENT_ID`
- `NEWSLETTER_TEMPLATE_ID`

### Architecture

- `main.py` - Entry point that orchestrates email sending
- `email_client/` - Mailchimp API wrapper (`EmailClient` class)
- `newsletter/` - Parses `UPDATES.md` content, converts GitBook markdown to HTML
- `UPDATES.md` - Content file used for newsletter body (auto-generated by GitHub Action from git diff)

## GitBook Content Structure

- `SUMMARY.md` - Table of contents defining navigation structure
- `README.md` - Landing page content
- Content organized in directories: `benefits-and-features/`, `policies-projects-evaluation-workflow/`, `faq-interaction/`, `readme-1/` (about/team info), etc.

### GitBook-Specific Markdown

GitBook uses custom syntax including:
- `{% hint style="info" %}...{% endhint %}` - Callout boxes
- `{% embed url="..." %}` - Embedded links
- `{% code overflow="wrap" %}` - Code block formatting
- YAML frontmatter for page layout configuration

## Style Guide

The Unjournal maintains a style guide for documentation consistency: https://docs.google.com/document/d/10aooH_YCVX__pXFqnY1l8Kn2_DPX9wdHdR9AfImSuDs/edit
